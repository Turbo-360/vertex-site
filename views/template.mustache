<!DOCTYPE html>
<head>
  {{>head}}
  <meta property="og:title" content="Vertex 360 | {{template.name}}" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://www.vertex360.co/template/{{template.slug}}" />
	<meta property="og:image" content="{{{template.image}}}=s260-c" />
	<meta property="og:image:width" content="260px" />
	<meta property="og:image:height" content="260px" />
	<meta property="og:description" content="{{template.description}}" />

  <style>
    .template-details {
      text-align: right
    }

    .template-details img {
      width: 32px;
      border-radius: 50%;
      margin-left: 4px;
    }

    .btn-edit {
      text-transform: uppercase;
      font-size: 9.7px;
      letter-spacing: 2.5px;
      font-weight: 60;
      background: #f91942;
      border-radius: 24px;
      padding: 8px 12px;
      line-height: 20px;
      color: #fff !important;
      font-weight: 400;
      margin-bottom: 9px;
    }

    .preview-title {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 180px;
    }

    @media (min-width: 768px) {
      .post-container {
        padding-top: 120px
      }

      .lg-pt-40 {
        padding-top: 40px;
      }
    }

    @media (max-width: 768px) {
      .post-content {
        padding: 16px !important;
      }
    }
  </style>
</head>

<body>
  <div id="wrapper" style="background:#f9f9f9">
    {{>nav}}
    <div class="clearfix"></div>
    <div class="container lg-pt-40">
      <div class="row post-container">
    		<div class="col-lg-9 col-md-8 padding-right-30">
    			<div class="blog-post single-post">

    				<div class="post-content">
              <a style="float:right;font-weight:600" target="_blank" href="https://{{template.slug}}.vertex360.co" class="btn-edit margin-top-20">View Example</a>
              <h1 style="font-size:32px">{{template.name}}</h1>
              <ul class="post-meta">
    						<li style="text-transform:capitalize">{{template.template.category}}</li>
    						<li><a style="color:#37b6bd" href="/profile/{{template.profile.slug}}">{{template.profile.username}}</a></li>
    					</ul>
              <hr class="margin-top-20 margin-bottom-30" />
              <img style="max-width:60%" class="post-img" src="{{{template.image}}}=s1024" alt="Vertex 360 | {{template.name}}">
    					<p>{{{template.description}}}</p>
              <h4>Screenshots</h4>
              {{#template.images}}
              <div class="screenshot">
                <a target="_blank" href="{{{ . }}}=s1024"><img src="{{{ . }}}" /></a>
              </div>
              {{/template.images}}
    				</div>

            <!-- About Author -->
      			<div class="about-author" style="margin:0px;border-top:1px solid #ededed;background:#fffffa">
              <h2 class="margin-bottom-0 margin-top-0 capitalize">Launch This Template</h2>
              <p style="margin-bottom:16px;color:#888">
                Launch this template on your account.
              </p>
              <img style="max-width:320px;float:inherit;width:inherit;height:inherit;border-radius:inherit;margin:inherit" src="{{{template.image}}}=s512" />

              <div class="input-row margin-top-40">
                <div class="input-label">Your Site Name</div>
                <div class="input-container">
                  <input id="input-site-name" type="text" />
                </div>
              </div>

              <div style="text-align:right">
                <a style="margin-top:4px;color:#fff" id="btn-clone-template" href="#" class="button with-icon">Launch This Template <i class="fa fa-angle-right"></i></a>
              </div>
      			</div>

    			</div>

          {{>newsletter}}

    			<!-- Related Posts -->
    			<div class="clearfix"></div>
          <hr />
    			<h3 class="headline margin-top-25 margin-bottom-10">Launch Your Website</h3>
          <p>Create fully-featured professional websites in minutes. Select a template below to get started.</p>
    			<div id="featured-templates" class="row"></div>
    			<div class="margin-top-50"></div>
    	</div>


    	<!-- Widgets -->
    	<div class="col-lg-3 col-md-4">
    		<div class="sidebar right">
    			<div class="widget margin-top-40">
    				<h3>Related</h3>
    				<ul id="related-sites" class="widget-tabs"></ul>
    			</div>
    		</div>
    	</div>
    	</div>
    	<!-- Sidebar / End -->

    </div>

    {{>footer-dark}}
    <a style="display:none" id="btn-show-modal" href="#sign-in-dialog" class="popup-with-zoom-anim">test</a>
  </div>
  <!-- Wrapper / End -->


<script type="text/template" id="tpl-site-preview">
  <li>
  	<div class="widget-content">
  		<div class="widget-thumb">
  			<a href="/template/<% slug %>">
          <img src="<%{image}%>=s120-c" alt="Vertex 360 | <% name %>" />
        </a>
  		</div>

      <div class="widget-text" style="padding-top:6px">
        <h5 class="preview-title" style="line-height:12px;margin-bottom:0px">
          <a href="/post/<% slug %>"><% name %></a>
        </h5>
  			<small><% template.category %></small>
  		</div>
  		<div class="clearfix"></div>
  	</div>
  </li>
</script>

<script type="text/template" id="tpl-launch-template">
  <div style="text-align:center">
    <h3 style="margin-bottom:0px;margin-top:0px">Launch Site</h3>
    <p style="margin-bottom:16px;color:#888">Launch this template on your account.</p>
    <img style="width:260px;margin-bottom:16px" src="<% image %>=s512" />
    <input id="input-site-name" type="text" placeholder="Your Site Name" />
    <div id="btn-launch-container">
      <a style="margin-top:4px;width:100%" id="btn-clone-template" href="#" class="button with-icon">Launch This Template <i class="fa fa-angle-right"></i></a>
    </div>
  </div>
</script>

<script type="text/javascript">window.__PRELOADED__ = {{{preloaded}}}</script>
<script type="text/javascript" src="{{{cdn}}}/dist/js/vendor.min.js"></script>
<script>
  (function(){
    Mustache.tags = ["<%", "%>"] // change delimiter so it doesn't conflict server side
    var data = window.__PRELOADED__
    var user = data.user
    var currentTemplate = data.template

    var launchTemplateHandler = function(event){
      if (event)
        event.preventDefault()

      if (user == null){
        $('#tab-register').click()
        document.getElementById('btn-show-modal').click()
        return
      }

      var tpl = $('#tpl-launch-template').html()
      $('#modal-container').html(Mustache.render(tpl, currentTemplate))
      $('#btn-clone-template').click(function(event){
        if (event)
          event.preventDefault()

        // launchTemplate()
      })

     document.getElementById('btn-show-modal').click()
    }

    $('#btn-launch-template').click(launchTemplateHandler)


    $.ajax({
      url: '/api/site?origin=vertex360&template.category='+currentTemplate.template.category+'&limit=5',
      data: null,
      type: 'GET',
      success: function(response){
        if (response.confirmation != 'success'){
          return
        }

        var templates = response.results
        console.log(JSON.stringify(templates))

        var tpl = $('#tpl-site-preview').html()
        var templatesHtml = ''
        templates.forEach(function(template){
          templatesHtml += Mustache.render(tpl, template)
        })

        $('#related-sites').html(templatesHtml)
      },
      error: function(response){}
    })
  })()
</script>

</body>
</html>
